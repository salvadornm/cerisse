#!/bin/bash
case  $1 in
    clean )
	tput setaf 2
	echo " ... removing plt*, *.tmp  files"
	tput sgr0
    	rm -rf ./plot/plt*
	rm -f *.tmp
	rm -f *.visit
	rm -rf Backtrace*
	echo -e "\\033[1;32m  dir clean and ready to run \\033[0m"
	case $2 in
		all )
		tput setaf 2
        	echo " ... removing building dirs, *.log, checkpoints and *.ex " 
		tput sgr0
		rm -rf tmp_build_dir
		rm -rf *.ex
		rm -rf chk*
		rm -rf plot
		rm -rf *.log
		echo -e "\\033[1;32m  and ready to compile\\033[0m"
		;;
		*)
		esac
	;;
	visit )
	tput setaf 2
	echo " ...  creating movie.visit file"
	tput sgr0
	ls -1 plot/plt*/Header | tee movie.visit	
	echo -e "\\033[1;32m  DONE  \\033[0m"
	;;
	run )
	tput setaf 2
	echo " ...  running cerisse MPI "
	tput sgr0
	mpirun --use-hwthread-cpus main2d.gnu.MPI.ex inputs	
	echo -e "\\033[1;32m  DONE  \\033[0m"
	;;
	plot )
	tput setaf 2
	echo " ...  quick x-momentum 2d plot"
	tput sgr0
	python ../../bin/plot2d.py
	echo -e "\\033[1;32m  DONE  \\033[0m"
	;;
	check )
	tput setaf 2
	echo " checking if cerisse is broken "
	tput sgr0
	case $2 in
		basic )
		echo "       .... basic flow "
		bash checktest.sh
		tput sgr0
		echo -e "\\033[1;32m  DONE  \\033[0m"
		;;
		chem )
		echo "       .... with PelePhysics and chemistry "
		tput sgr0
		bash checktestchem.sh
		tput sgr0
		echo -e "\\033[1;32m  DONE  \\033[0m"
		;;
		*)
		echo "check [option] not recognised.."
		echo "basic/chem"
		esac
	;;
	backup )
    tput setaf 2
    echo " backing up.. in $2 "
	tput sgr0
    mkdir $2
	cp *.H $2
	cp *.h $2
	cp *.cpp $2
	cp inputs $2	
	cp GNUmakefile $2
	cp *.py $2
	mv *chk $2
	mv *.visit $2
	mv plot $2/
	echo -e "\\033[1;32m  DONE  \\033[0m"
	;;
    *)
	echo "option not recognised.."
	echo "clean[all]/visit/plot/backup[dirname]/check"
    exit
esac


